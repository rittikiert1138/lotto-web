generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["prismaSchemaFolder"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  user_id  Int    @id @default(autoincrement())
  phone    String @unique
  username String @unique
  password String
  role     String
  status   Int

  createdBy Int
  updatedBy Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  member    Member[]
}

model Member {
  member_id   Int            @id @default(autoincrement())
  username    String         @unique @db.VarChar(50)
  password    String
  status      Int
  attemp      Int            @default(0)
  phone       String         @unique @db.VarChar(10)
  balance     Float          @default(0)
  total_bet   Float          @default(0)
  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt
  user        User?          @relation(fields: [user_id], references: [user_id])
  user_id     Int?
  transaction Transaction[]
  bank        MemberBank[]
  lotto       member_lotto[]
}

model Transaction {
  transaction_id     Int     @id @default(autoincrement())
  transaction_type   Int
  transaction_status Int
  transaction_slip   String?
  balance            Float   @default(0)
  member             Member  @relation(fields: [member_id], references: [member_id])
  member_id          Int
}

model MemberBank {
  member_bank_id    Int    @id @default(autoincrement())
  bank_type         Int
  bank_name         String
  bank_number       String
  bank_account_name String
  member            Member @relation(fields: [member_id], references: [member_id])
  member_id         Int
}

model Bank {
  bank_id           Int    @id @default(autoincrement())
  bank_type         Int
  bank_name         String
  bank_number       String
  bank_account_name String
  bank_status       Int
}

model otp_system {
  otp_id  Int      @id @default(autoincrement())
  otp     String
  ref     String
  phone   String   @db.VarChar(10)
  expired DateTime
}

model lotto {
  lotto_id   Int      @id @default(autoincrement())
  lotto_type String   @unique
  period     DateTime
  close_time DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}

model member_lotto {
  member_lotto_id Int      @id @default(autoincrement())
  lotto_id        Int
  member_id       Int
  bet_type        Int
  bet_number      String
  bet_amount      Float
  bet_status      Int
  createdAt       DateTime @default(now())
  member          Member   @relation(fields: [member_id], references: [member_id])
}
